{% extends 'community/Base.html' %}

{% load static %}

{% block title %}
新增穿搭
{% endblock %}

{% block h1 %}
新增穿搭
{% endblock %}

{% block content %}
    <section class="main">
        <div class="addOutfit_left-col">
            <div class="post">
                <form action="" enctype="multipart/form-data" method="post">{% csrf_token %}
                <div class="info">
                    <div class="user">
                        <img src="{% static 'images/icon-svg/edit.svg' %}" class="edit" alt="">
                        <input type="text" name="title" placeholder="為你的穿搭命名！" class="outfit_title" style="color: rgba(148,122,136,1);" />
                    </div>
                    </div>

                    <div class="post-image">

                        <div class="post_camera_icon">
                                <img id="photo" class="post-image" src="{% static 'images/icon-svg/camera_add.jpg' %}"/>
                                <input id="photo" name="image" type="file" accept="image/*" class="post_fileInput"  multiple=""/>

                        </div>

                        <script src="https://code.jquery.com/jquery-3.1.0.js"></script>
                        <script>

                                $('input').on('change', function(e){
                                    const file = this.files[0];
                                    const objectURL = URL.createObjectURL(file);
                                    $("#photo").attr("src", objectURL);
                                });

                        </script>


                </div>


                <div>

                    <div style="padding-bottom: 25px;"></div>
                    <hr size="1px" color= "#d9d9d9" width="100%">
                    <input type="text" name="content" placeholder="向大家介紹你的穿搭吧 ~ " class="outfit_content">

                        <br>
                        <hr size="1px" color= "#d9d9d9" width="100%">

                </div>

                <div>

                    <br><br>
                    <input type="button" class="new_outfit_tag_clothes_font" value="標註單品" style="border:0; width: 90%; cursor:pointer" />
                    <hr size="1px" color= "#e6e6e6" width="100%">


                </div>

                <div style="display: flex;">
                    <a href="#tag_popup1" class="tag_link_area"><div>
                        <img src="{%if origin_clothe %}{{ origin_clothe.image.url }}{% else %}{% static 'images/icon-svg/add.png' %}{% endif %}"  class="tag_clothes_block">
                    </div></a>

                    <a href="#tag_popup1" class="tag_link_area"><div> <img src="{% static 'images/icon-svg/add.png' %}"  class="tag_clothes_block"> </div></a>

                    <a href="#tag_popup1" class="tag_link_area"><div> <img src="{% static 'images/icon-svg/add.png' %}" class="tag_clothes_block"> </div></a>

                    <a href="#tag_popup1" class="tag_link_area"><div> <img src="{% static 'images/icon-svg/add.png' %}" class="tag_clothes_block"> </div></a>

                    <a href="#tag_popup1" class="tag_link_area"><div> <img src="{% static 'images/icon-svg/add.png' %}"  class="tag_clothes_block"> </div></a>



                    <br>
                    <div id="tagged_clothes">
                        {%if origin_clothe %}<input type="hidden" id="{{ origin_clothe.id }}" name="{{ origin_clothe.id }}" value="{{ origin_clothe.id }}">{% endif %}
                    </div>
                    <button id="submit" class="new_outfit_submit" >
                        <div class="new_outfit_submit_font">新增我的穿搭</div>
                    </button>

                </div>
                </form>

                <div style="padding-bottom: 250px;"></div>

                <div id="tag_popup1" class="tag_overlay">
                    <div class="tag_popup">
                        <h2 >選擇種類</h2>
                        <a href="#tag_tshirt"><img src="{% static 'images/tshirt1.png' %}" class="tag_type" /></a>
                        <a href="#tag_shirt"><img src="{% static 'images/shirt1.png' %}" class="tag_type" /></a>
                        <a href="#tag_shorts"><img src="{% static 'images/shorts1.png' %}" class="tag_type" /></a>
                        <a href="#tag_pants"><img src="{% static 'images/pants1.png' %}" class="tag_type" /></a>
                        <a href="#tag_shoes"><img src="{% static 'images/shoes1.png' %}" class="tag_type" /></a>
                        <a href="#tag_skirt"><img src="{% static 'images/skirt1.png' %}" class="tag_type" /></a>
                        <a href="#tag_dress"><img src="{% static 'images/dress1.png' %}" class="tag_type" /></a>

                        <a class="close" href="#">&times;</a>
                    </div>
                </div>

                <div id="tag_tshirt" class="tag_tshirt_overlay">
                    <div class="tag_tshirt_popup">
                        <h2>標註 Tshirt</h2>
                        <a href="#tag_tshirt"><img src="{% static 'images/tshirt1.png' %}" class="tag_type_tshirt" /></a>
                        <a class="close" href="#">&times;</a>
                        <h2>選擇衣物</h2>
                        {% for clothe in clothes %}
                            {% if clothe.type.id == 2 %}
                                <a href="#">
                                    <button type="button">
                                        <img id="{{ clothe.id }}" src="{{ clothe.image.url }}"class="tag_select" />
                                    </button>
                                </a>
                            {% endif %}
                        {% endfor %}

                    </div>
                </div>

                <div id="tag_shirt" class="tag_tshirt_overlay">
                    <div class="tag_tshirt_popup">
                        <h2>標註 Shirt</h2>
                        <a href="#tag_shirt"><img src="{% static 'images/shirt1.png' %}" class="tag_type_tshirt" /></a>
                        <a class="close" href="#">&times;</a>
                        <h2>選擇衣物</h2>
                        {% for clothe in clothes %}
                            {% if clothe.type.id == 1 %}
                                <a href="#">
                                    <button type="button">
                                        <img id="{{ clothe.id }}" src="{{ clothe.image.url }}"class="tag_select" />
                                    </button>
                                </a>
                            {% endif %}
                        {% endfor %}

                    </div>
                </div>

                <div id="tag_shorts" class="tag_tshirt_overlay">
                    <div class="tag_tshirt_popup">
                        <h2>標註 Shorts</h2>
                        <a href="#tag_shorts"><img src="{% static 'images/shorts1.png' %}" class="tag_type_tshirt" /></a>
                        <a class="close" href="#">&times;</a>
                        <h2>選擇衣物</h2>
                        {% for clothe in clothes %}
                            {% if clothe.type.id == 4 %}
                                <a href="#">
                                    <button type="button">
                                        <img id="{{ clothe.id }}" src="{{ clothe.image.url }}"class="tag_select" />
                                    </button>
                                </a>
                            {% endif %}
                        {% endfor %}

                    </div>
                </div>

                <div id="tag_pants" class="tag_tshirt_overlay">
                    <div class="tag_tshirt_popup">
                        <h2>標註 Pants</h2>
                        <a href="#tag_tshirt"><img src="{% static 'images/pants1.png' %}" class="tag_type_tshirt" /></a>
                        <a class="close" href="#">&times;</a>
                        <h2>選擇衣物</h2>
                        {% for clothe in clothes %}
                            {% if clothe.type.id == 3 %}
                                <a href="#">
                                    <button type="button">
                                        <img id="{{ clothe.id }}" src="{{ clothe.image.url }}"class="tag_select" />
                                    </button>
                                </a>
                            {% endif %}
                        {% endfor %}

                    </div>
                </div>

                <div id="tag_shoes" class="tag_tshirt_overlay">
                    <div class="tag_tshirt_popup">
                        <h2>標註 Shoes</h2>
                        <a href="#tag_shoes"><img src="{% static 'images/shoes1.png' %}" class="tag_type_tshirt" /></a>
                        <a class="close" href="#">&times;</a>
                        <h2>選擇衣物</h2>
                        {% for clothe in clothes %}
                            {% if clothe.type.id == 7 %}
                                <a href="#">
                                    <button type="button">
                                        <img id="{{ clothe.id }}" src="{{ clothe.image.url }}"class="tag_select" />
                                    </button>
                                </a>
                            {% endif %}
                        {% endfor %}

                    </div>
                </div>

                <div id="tag_skirt" class="tag_tshirt_overlay">
                    <div class="tag_tshirt_popup">
                        <h2>標註 Skirt</h2>
                        <a href="#tag_skirt"><img src="{% static 'images/skirt1.png' %}" class="tag_type_tshirt" /></a>
                        <a class="close" href="#">&times;</a>
                        <h2>選擇衣物</h2>
                        {% for clothe in clothes %}
                            {% if clothe.object.id == 5 %}
                                <a href="#">
                                    <button type="button">
                                        <img id="{{ clothe.id }}" src="{{ clothe.image.url }}"class="tag_select" />
                                    </button>
                                </a>
                            {% endif %}
                        {% endfor %}

                    </div>
                </div>

                <div id="tag_dress" class="tag_tshirt_overlay">
                    <div class="tag_tshirt_popup">
                        <h2>標註 Dress</h2>
                        <a href="#tag_dress"><img src="{% static 'images/dress1.png' %}" class="tag_type_tshirt" /></a>
                        <a class="close" href="#">&times;</a>
                        <h2>選擇衣物</h2>
                        {% for clothe in clothes %}
                            {% if clothe.type.id == 6 %}
                                <a href="#">
                                    <button type="button">
                                        <img id="{{ clothe.id }}" src="{{ clothe.image.url }}"class="tag_select" />
                                    </button>
                                </a>
                            {% endif %}
                        {% endfor %}

                    </div>
                </div>



            </div>

        </div>

    </section>
{% endblock %}

{% block script %}
    <script>
        $(document).ready(function() {
            $(".tag_select").each(function() {
                $(this).on("click", function() {
                    console.log($(this).attr("src"));
                    console.log($(this).attr("id"));
                    clotheImage = $(this).attr("src");
                    clotheId = $(this).attr("id");

                    $(".tag_clothes_block").each(function() {
                        if ($(this).attr("src") == '/static/images/icon-svg/add.png') {
                            $(this).attr("src", clotheImage);

                            var $input = $('<input type="hidden">').attr({ id: clotheId, name: clotheId, value: clotheId });
                            $("#tagged_clothes").append($input);
                            return false;
                        }

                    });

                });
            });
        });
    </script>
{% endblock %}